{"id":"../../../node_modules/one-micro-map/src/providermap.tsx","dependencies":[{"name":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/tsconfig.json","includedInParent":true,"mtime":1569955866845},{"name":"/Users/chriswf/Documents/Projects/unch-gadget/packages/OBD-Portal/package.json","includedInParent":true,"mtime":1569955431018},{"name":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/package.json","includedInParent":true,"mtime":1569955866845},{"name":"react","loc":{"line":63,"column":22},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/react/index.js"},{"name":"antd/lib/typography","loc":{"line":49,"column":43},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/typography/index.js"},{"name":"antd/lib/select","loc":{"line":50,"column":39},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/select/index.js"},{"name":"antd/lib/icon","loc":{"line":51,"column":37},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/icon/index.js"},{"name":"antd/lib/row","loc":{"line":52,"column":36},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/row/index.js"},{"name":"antd/lib/col","loc":{"line":53,"column":36},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/col/index.js"},{"name":"antd/lib/switch","loc":{"line":54,"column":39},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/antd/lib/switch/index.js"},{"name":"react-redux","loc":{"line":61,"column":28},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/react-redux/es/index.js"},{"name":"@fortawesome/react-fontawesome","loc":{"line":56,"column":34},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/@fortawesome/react-fontawesome/index.es.js"},{"name":"@fortawesome/free-solid-svg-icons","loc":{"line":57,"column":37},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/@fortawesome/free-solid-svg-icons/index.es.js"},{"name":"one-ui-provider","loc":{"line":58,"column":32},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-ui-provider/index.ts"},{"name":"one-model-address","loc":{"line":59,"column":34},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-model-address/index.ts"},{"name":"one-core","loc":{"line":60,"column":25},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-micro-map/src/providermap.tsx","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-core/index.ts"}],"generated":{"js":"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar typography_1 = __importDefault(require(\"antd/lib/typography\"));\nvar select_1 = __importDefault(require(\"antd/lib/select\"));\nvar icon_1 = __importDefault(require(\"antd/lib/icon\"));\nvar row_1 = __importDefault(require(\"antd/lib/row\"));\nvar col_1 = __importDefault(require(\"antd/lib/col\"));\nvar switch_1 = __importDefault(require(\"antd/lib/switch\"));\nvar react_redux_1 = require(\"react-redux\");\nvar react_fontawesome_1 = require(\"@fortawesome/react-fontawesome\");\nvar free_solid_svg_icons_1 = require(\"@fortawesome/free-solid-svg-icons\");\nvar one_ui_provider_1 = require(\"one-ui-provider\");\nvar one_model_address_1 = require(\"one-model-address\");\nvar one_core_1 = require(\"one-core\");\nvar react_redux_2 = require(\"react-redux\");\nvar react_1 = require(\"react\");\nvar react_2 = require(\"react\");\nvar Option = select_1.default.Option;\nvar Text = typography_1.default.Text;\nvar map;\nfunction initMap() {\n    console.log(\"initMap\");\n    var mapfilter = document.getElementById('mapfilter').value;\n    var defaultaddress = document.getElementById('defaultaddress').value;\n    var address = document.getElementById('mapaddress').value;\n    var defaultlat = document.getElementById('lat').value;\n    var defaultlon = document.getElementById('lon').value;\n    var finaladdress = address ? address : defaultaddress;\n    // Create the map.\n    var pyrmont = {};\n    var contentString = '<div id=\"content\">' +\n        '<div id=\"siteNotice\">' +\n        '</div>' +\n        '<h1 id=\"firstHeading\" class=\"firstHeading\">Address</h1>' +\n        '<div id=\"bodyContent\">' +\n        '<p>' + finaladdress + '</p>' +\n        '</div>' +\n        '</div>';\n    var infowindow = new window.google.maps.InfoWindow({\n        content: contentString\n    });\n    map = new window.google.maps.Map(document.getElementById('map'), {\n        //center: pyrmont,\n        zoom: 15\n    });\n    var geocoder = new window.google.maps.Geocoder();\n    var address = finaladdress;\n    geocoder.geocode({ 'address': address }, function (results, status) {\n        if (status === 'OK') {\n            map.setCenter(results[0].geometry.location);\n            //pyrmont = results[0].geometry.location;\n            pyrmont = {\n                lat: results[0].geometry.location.lat(),\n                lng: results[0].geometry.location.lng(),\n            };\n            //pyrmont = Array.from(coords);\n            var marker = new window.google.maps.Marker({\n                map: map,\n                position: results[0].geometry.location\n            });\n            marker.addListener('click', function () {\n                infowindow.open(map, marker);\n            });\n            setPlaces(pyrmont, mapfilter, map);\n        }\n        else {\n            //pyrmont = results[0].geometry.location;\n            pyrmont = {\n                lat: defaultlat,\n                lng: defaultlon\n            };\n            var cpos = new window.google.maps.LatLng(defaultlat, defaultlon);\n            map.setCenter(cpos);\n            //console.log(\"coords::\",coords);\n            //pyrmont = Array.from(coords);\n            var marker = new window.google.maps.Marker({\n                map: map,\n                position: cpos\n            });\n            marker.addListener('click', function () {\n                infowindow.open(map, marker);\n            });\n            setPlaces(cpos, mapfilter, map);\n            console.log('Geocode was not successful for the following reason: ' + status);\n        }\n    });\n    //   pyrmont = {\n    //     lat: 17.3428793,\n    //     lng: 78.56253629999992\n    //   };\n    //  console.log(\"pyrmont::\",pyrmont);\n    // if (navigator.geolocation) {\n    //     try {\n    //         navigator.geolocation.getCurrentPosition(function (position) {\n    //             var pyrmont = {\n    //                 lat: position.coords.latitude,\n    //                 lng: position.coords.longitude\n    //             };\n    //         });\n    //     } catch (err) {\n    //     }\n    // }\n    //   var marker = new window.google.maps.Marker({\n    //     position: pyrmont,\n    //     map: map,\n    //     title: 'UNCH'\n    //   });\n}\nfunction setPlaces(pyrmont, place, map) {\n    //console.log(\"pyrmont:::\", pyrmont);\n    //console.log(\"place:::\", place);\n    // Create the places service.\n    var service = new window.google.maps.places.PlacesService(map);\n    // Perform a nearby search.\n    service.nearbySearch({\n        location: pyrmont,\n        radius: 500,\n        type: [place]\n    }, function (results, status, pagination) {\n        if (status !== 'OK')\n            return;\n        createMarkers(results);\n        console.log(\"Marker::\", results);\n        // var getNextPage = pagination.hasNextPage && function() {\n        //    pagination.nextPage();\n        // };\n    });\n}\nfunction createMarkers(places) {\n    var bounds = new window.google.maps.LatLngBounds();\n    for (var i = 0, place; place = places[i]; i++) {\n        var image = {\n            url: place.icon,\n            size: new window.google.maps.Size(90, 90),\n            origin: new window.google.maps.Point(0, 0),\n            anchor: new window.google.maps.Point(17, 34),\n            scaledSize: new window.google.maps.Size(25, 25)\n        };\n        var marker = new window.google.maps.Marker({\n            map: map,\n            icon: image,\n            title: place.name,\n            position: place.geometry.location\n        });\n        bounds.extend(place.geometry.location);\n    }\n    map.fitBounds(bounds);\n}\nfunction googleMap(dispatch, initmaploop, setInitmaploop) {\n    console.log('googleMap');\n    //const query = `https://jsonplaceholder.typicode.com/todos/1`\n    var result = useFetch(null, null);\n    //console.log('result', result);\n    if ((result === 'undefied' || result === null)) {\n        //console.log('Loading..');\n    }\n    else {\n        //console.log('initmaploop..',initmaploop);\n        if (initmaploop) {\n            //   setTimeout(\n            //   initMap, 1000\n            //  );\n            initMap();\n            setInitmaploop(false);\n            dispatch({\n                type: \"enable-hook-map\",\n                payload: false\n            });\n        }\n    }\n}\nfunction useFetch(url, defaultData) {\n    var _a = react_2.useState(null), data = _a[0], updateData = _a[1];\n    //console.log('defaultData',defaultData);\n    react_1.useEffect(function () {\n        function fetchData() {\n            return __awaiter(this, void 0, void 0, function () {\n                var mapfilter;\n                return __generator(this, function (_a) {\n                    console.log('useaffect');\n                    mapfilter = document.getElementById('mapfilter').value;\n                    do {\n                        //console.log('mapfilter:',mapfilter);\n                    } while (mapfilter === null && mapfilter === undefined);\n                    updateData(mapfilter);\n                    return [2 /*return*/];\n                });\n            });\n        }\n        fetchData();\n    }, [url]);\n    return data;\n}\nexports.ProviderMap = function (props) {\n    console.log('ProviderMap');\n    var _a = react_2.useState(true), initmaploop = _a[0], setInitmaploop = _a[1];\n    var dispatch = react_redux_1.useDispatch();\n    var _b = one_ui_provider_1.useCtx(), settings = _b.settings, resolver = _b.resolver;\n    var _c = settings.mapdetails, mapdetails = _c === void 0 ? {} : _c;\n    var defaultaddress = mapdetails.defaultaddress, lat = mapdetails.lat, lon = mapdetails.lon;\n    var mapconfig = react_redux_2.useSelector(function (state) { return state.map; });\n    var dnis = react_redux_2.useSelector(function (state) { return (state.dnis || {}); });\n    var _d = react_redux_2.useSelector(function (state) { return (state.patient || {}); }), patientdetails = _d.patientdetails, _e = _d.selected, patientvalues = _e === void 0 ? {} : _e;\n    var pharmacyswitch = mapconfig.switch2;\n    var hospitalswitch = mapconfig.switch3;\n    var parkingswitch = mapconfig.switch4;\n    var storemapaddress = mapconfig.mapaddress;\n    var storemapphoneno = mapconfig.mapphoneno;\n    var mapdefaultfilter = mapconfig.mapfilter;\n    //Code to set hook to true at oncall, google map filter change.\n    if (mapconfig && mapconfig.initmaploop && mapconfig.initmaploop === true) {\n        setInitmaploop(true);\n    }\n    var addresses = one_core_1.array(patientvalues.Addresses).filter(function (a) { return (a.Type === 'Permanent'); }).map(function (a) { return (one_model_address_1.address(a)); });\n    var patientaddress = addresses && addresses[0] && addresses[0].street.string || '';\n    var patientphoneno = addresses && addresses[0] && addresses[0].phones[0].num || '';\n    var clinicaddress = dnis.clinicaddress || '';\n    var clinicphone = dnis.phone || '';\n    var mapaddress = storemapaddress ? storemapaddress : patientaddress;\n    var mapphoneno = storemapphoneno ? storemapphoneno : patientphoneno;\n    var changeParkingFilter = function (checked) {\n        if (checked) {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: \"parking\",\n                    switch1: false,\n                    switch2: false,\n                    switch3: false,\n                    switch4: true\n                }\n            });\n        }\n        else {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: '',\n                    switch1: false,\n                    switch2: false,\n                    switch3: false,\n                    switch4: false\n                }\n            });\n        }\n        setInitmaploop(true);\n    };\n    var changeHospitalFilter = function (checked) {\n        if (checked) {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: \"hospital\",\n                    switch1: false,\n                    switch2: false,\n                    switch3: true,\n                    switch4: false\n                }\n            });\n        }\n        else {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: '',\n                    switch1: false,\n                    switch2: false,\n                    switch3: false,\n                    switch4: false\n                }\n            });\n        }\n        setInitmaploop(true);\n    };\n    var changePharmacyFilter = function (checked) {\n        if (checked) {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: \"pharmacy\",\n                    switch1: false,\n                    switch2: true,\n                    switch3: false,\n                    switch4: false\n                }\n            });\n        }\n        else {\n            dispatch({\n                type: \"MAP_FILTER\",\n                payload: {\n                    mapfilter: '',\n                    switch1: false,\n                    switch2: false,\n                    switch3: false,\n                    switch4: false\n                }\n            });\n        }\n        setInitmaploop(true);\n    };\n    var changeGeoLocation = function (e) {\n        console.log(\"changeGeoLocation\", e);\n        if ((e) && e === 'customer') {\n            if (patientaddress) {\n                dispatch({\n                    type: \"ADD_MAP\",\n                    payload: {\n                        mapaddress: patientaddress,\n                        mapphoneno: patientphoneno\n                    }\n                });\n            }\n        }\n        else {\n            if (clinicaddress) {\n                dispatch({\n                    type: \"ADD_MAP\",\n                    payload: {\n                        mapaddress: clinicaddress,\n                        mapphoneno: clinicphone\n                    }\n                });\n            }\n        }\n        setInitmaploop(true);\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", null,\n            React.createElement(\"div\", { style: { textAlign: \"left\" } },\n                React.createElement(\"span\", { style: { marginRight: \"45px\" } }),\n                React.createElement(select_1.default, { defaultValue: \"customer\", style: { width: 200 }, onChange: changeGeoLocation },\n                    React.createElement(Option, { value: \"customer\" }, \"Customer Geo Location\"),\n                    React.createElement(Option, { value: \"clinic\" }, \"Clinic Geo Location\")),\n                React.createElement(\"span\", { style: { marginRight: \"15px\" } }),\n                React.createElement(\"span\", { style: { marginRight: \"70px\" } },\n                    React.createElement(icon_1.default, { type: \"environment\" }),\n                    React.createElement(Text, { strong: true, style: { fontSize: \"16px\" } }, mapaddress)),\n                React.createElement(\"span\", { style: { marginRight: \"30px\" } },\n                    React.createElement(icon_1.default, { type: \"phone\" }),\n                    React.createElement(Text, { strong: true, style: { fontSize: \"16px\" } }, mapphoneno)),\n                React.createElement(\"input\", { type: \"hidden\", value: mapdefaultfilter, id: \"mapfilter\" }),\n                React.createElement(\"input\", { type: \"hidden\", value: defaultaddress, id: \"defaultaddress\" }),\n                React.createElement(\"input\", { type: \"hidden\", value: mapaddress, id: \"mapaddress\" }),\n                React.createElement(\"input\", { type: \"hidden\", value: lat, id: \"lat\" }),\n                React.createElement(\"input\", { type: \"hidden\", value: lon, id: \"lon\" })),\n            React.createElement(\"div\", null,\n                React.createElement(row_1.default, null,\n                    React.createElement(col_1.default, { span: 20 },\n                        React.createElement(\"div\", { id: \"map\" })),\n                    React.createElement(col_1.default, { span: 4 },\n                        (props.pharmacyfilter) && React.createElement(\"div\", { style: { marginBottom: '8px' } },\n                            React.createElement(\"span\", { style: { textAlign: 'center', display: 'inline-block', width: '56px' } },\n                                React.createElement(react_fontawesome_1.FontAwesomeIcon, { icon: free_solid_svg_icons_1.faPrescription, size: \"3x\" })),\n                            React.createElement(\"span\", { style: { textAlign: 'center' } },\n                                React.createElement(switch_1.default, { checkedChildren: \"Yes\", unCheckedChildren: \"No\", onChange: changePharmacyFilter, checked: pharmacyswitch }))),\n                        (props.hospitalfilter) && React.createElement(\"div\", { style: { marginBottom: '8px' } },\n                            React.createElement(\"span\", { style: { textAlign: 'center', display: 'inline-block', width: '56px' } },\n                                React.createElement(react_fontawesome_1.FontAwesomeIcon, { icon: free_solid_svg_icons_1.faClinicMedical, size: \"3x\" })),\n                            React.createElement(\"span\", { style: { textAlign: 'center' } },\n                                React.createElement(switch_1.default, { checkedChildren: \"Yes\", unCheckedChildren: \"No\", className: \"hospital\", onChange: changeHospitalFilter, checked: hospitalswitch }))),\n                        (props.parkingfilter) && React.createElement(\"div\", { style: { marginBottom: '8px' } },\n                            React.createElement(\"span\", { style: { textAlign: 'center', display: 'inline-block', width: '56px' } },\n                                React.createElement(react_fontawesome_1.FontAwesomeIcon, { icon: free_solid_svg_icons_1.faParking, size: \"3x\" })),\n                            React.createElement(\"span\", { style: { textAlign: 'center' } },\n                                React.createElement(switch_1.default, { checkedChildren: \"Yes\", unCheckedChildren: \"No\", className: \"hotel\", checked: parkingswitch, onChange: changeParkingFilter })))))),\n            googleMap(dispatch, initmaploop, setInitmaploop))));\n};\n"},"sourceMaps":{"js":{"version":3,"file":"providermap.js","sourceRoot":"","sources":["../../../node_modules/one-micro-map/src/providermap.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Typography from 'antd/lib/typography';\nimport Select from 'antd/lib/select';\nimport Icon from 'antd/lib/icon';\nimport Row from 'antd/lib/row';\nimport Col from 'antd/lib/col';\nimport Switch from 'antd/lib/switch';\nimport $ from 'jquery';\nimport { useDispatch } from \"react-redux\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPrescription, faClinicMedical, faParking } from '@fortawesome/free-solid-svg-icons'\nimport { useCtx } from 'one-ui-provider';\nimport { address } from 'one-model-address';\nimport { array } from 'one-core';\nimport { useSelector } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\n\n\n\n\n\nconst { Option } = Select;\nconst { Text } = Typography;\n\nvar map: any;\n\ninterface Props {\n    hospitalfilter?:boolean,\n    parkingfilter?:boolean,\n    pharmacyfilter?:boolean\n}\n\n\n\n\nfunction initMap() {\n  console.log(\"initMap\");\n    var mapfilter = document.getElementById('mapfilter').value;\n    var defaultaddress = document.getElementById('defaultaddress').value;\n    var address = document.getElementById('mapaddress').value;\n    var defaultlat = document.getElementById('lat').value;\n    var defaultlon = document.getElementById('lon').value;\n    var finaladdress = address?address:defaultaddress;\n    // Create the map.\n    var pyrmont = {};\n    var contentString = '<div id=\"content\">' +\n      '<div id=\"siteNotice\">' +\n      '</div>' +\n      '<h1 id=\"firstHeading\" class=\"firstHeading\">Address</h1>' +\n      '<div id=\"bodyContent\">' +\n      '<p>' + finaladdress + '</p>' +\n      '</div>' +\n      '</div>';\n    var infowindow = new window.google.maps.InfoWindow({\n      content: contentString\n    });\n  \n    map = new window.google.maps.Map(document.getElementById('map'), {\n  \n      //center: pyrmont,\n      zoom: 15\n    });\n  \n  \n    var geocoder = new window.google.maps.Geocoder();\n    var address = finaladdress;\n    geocoder.geocode({ 'address': address }, function (results, status) {\n      if (status === 'OK') {\n        map.setCenter(results[0].geometry.location);\n        //pyrmont = results[0].geometry.location;\n        pyrmont = {\n          lat: results[0].geometry.location.lat(),\n          lng: results[0].geometry.location.lng(),\n        };\n        //pyrmont = Array.from(coords);\n  \n        var marker = new window.google.maps.Marker({\n          map: map,\n          position: results[0].geometry.location\n        });\n        marker.addListener('click', function () {\n          infowindow.open(map, marker);\n        });\n  \n        setPlaces(pyrmont, mapfilter, map);\n      } else {\n  \n  \n                //pyrmont = results[0].geometry.location;\n                pyrmont = {\n                  lat: defaultlat,\n                  lng: defaultlon\n                };\n                let cpos = new window.google.maps.LatLng(defaultlat,defaultlon);\n                map.setCenter(cpos);\n                //console.log(\"coords::\",coords);\n                //pyrmont = Array.from(coords);\n  \n                var marker = new window.google.maps.Marker({\n                  map: map,\n                  position: cpos\n                });\n                marker.addListener('click', function () {\n                  infowindow.open(map, marker);\n                });\n  \n                setPlaces(cpos, mapfilter, map);\n        console.log('Geocode was not successful for the following reason: ' + status);\n      }\n    });\n    //   pyrmont = {\n    //     lat: 17.3428793,\n    //     lng: 78.56253629999992\n    //   };\n    //  console.log(\"pyrmont::\",pyrmont);\n  \n    // if (navigator.geolocation) {\n    //     try {\n    //         navigator.geolocation.getCurrentPosition(function (position) {\n    //             var pyrmont = {\n    //                 lat: position.coords.latitude,\n    //                 lng: position.coords.longitude\n    //             };\n    //         });\n    //     } catch (err) {\n  \n    //     }\n    // }\n  \n  \n  \n  \n  \n  \n    //   var marker = new window.google.maps.Marker({\n    //     position: pyrmont,\n    //     map: map,\n    //     title: 'UNCH'\n    //   });\n  \n  \n  \n  \n  \n  }\n\n  function setPlaces(pyrmont: any, place: any, map: any) {\n    //console.log(\"pyrmont:::\", pyrmont);\n    //console.log(\"place:::\", place);\n    // Create the places service.\n    var service = new window.google.maps.places.PlacesService(map);\n  \n    // Perform a nearby search.\n    service.nearbySearch({\n      location: pyrmont,\n      radius: 500,\n      type: [place]\n    },\n      function (results, status, pagination) {\n        if (status !== 'OK') return;\n  \n        createMarkers(results);\n        console.log(\"Marker::\", results)\n        // var getNextPage = pagination.hasNextPage && function() {\n        //    pagination.nextPage();\n        // };\n      });\n  \n  }\n\n  function createMarkers(places: any) {\n    var bounds = new window.google.maps.LatLngBounds();\n    for (var i = 0, place; place = places[i]; i++) {\n      var image = {\n        url: place.icon,\n        size: new window.google.maps.Size(90, 90),\n        origin: new window.google.maps.Point(0, 0),\n        anchor: new window.google.maps.Point(17, 34),\n        scaledSize: new window.google.maps.Size(25, 25)\n      };\n  \n      var marker = new window.google.maps.Marker({\n        map: map,\n        icon: image,\n        title: place.name,\n        position: place.geometry.location\n      });\n      bounds.extend(place.geometry.location);\n    }\n    map.fitBounds(bounds);\n  }\n  \nfunction googleMap(dispatch: any, initmaploop: any, setInitmaploop: any) {\n    \n  console.log('googleMap');\n    \n  //const query = `https://jsonplaceholder.typicode.com/todos/1`\n  const result = useFetch(null, null)\n  //console.log('result', result);\n    if((result=== 'undefied' || result === null)){\n      //console.log('Loading..');\n    }else{\n    //console.log('initmaploop..',initmaploop);\n    if(initmaploop){\n    //   setTimeout(\n    //   initMap, 1000\n    //  );\n      initMap();\n      setInitmaploop(false);\n      dispatch({\n        type: \"enable-hook-map\",\n        payload: false\n      });\n    }\n\n    }\n    \n    \n}\n\nfunction useFetch(url: any, defaultData: any) {\n  const [data, updateData] = useState(null)\n  //console.log('defaultData',defaultData);\n  useEffect(() => {\n    async function fetchData() {\n      console.log('useaffect');\n      // const resp = await fetch(url)\n      // const json = await resp.json()\n      // updateData(json)\n      var mapfilter = document.getElementById('mapfilter').value;\n      do{\n        //console.log('mapfilter:',mapfilter);\n      }while(mapfilter===null && mapfilter===undefined)\n      updateData(mapfilter);\n  }fetchData();}, [url])\n\n  return data\n}\n\n\n\n\nexport const ProviderMap = (props: Props) => {\n  console.log('ProviderMap');\n  const [initmaploop, setInitmaploop] = useState(true);\n  \n    \n    const dispatch = useDispatch();\n    const { settings, resolver } = useCtx();\n    const { mapdetails = {} } = settings;\n    const { defaultaddress, lat, lon } = mapdetails;\n    const mapconfig = useSelector((state:any) => state.map);\n    const dnis = useSelector((state:any) => (state.dnis || {}));\n    const { patientdetails, selected: patientvalues = {} } = useSelector((state: any) => (\n        state.patient || {}\n      ));\n    const pharmacyswitch = mapconfig.switch2;\n    const hospitalswitch = mapconfig.switch3;\n    const parkingswitch = mapconfig.switch4;\n    const storemapaddress = mapconfig.mapaddress;\n    const storemapphoneno = mapconfig.mapphoneno;\n    const mapdefaultfilter = mapconfig.mapfilter;\n    //Code to set hook to true at oncall, google map filter change.\n    if(mapconfig && mapconfig.initmaploop && mapconfig.initmaploop === true){\n      setInitmaploop(true);\n    }\n    const addresses = array(patientvalues.Addresses).filter((a: any) => (\n        a.Type === 'Permanent'\n    )).map((a: any) => (\n        address(\n            a,\n        )\n    ));\n    const patientaddress = addresses && addresses[0] && addresses[0].street.string || '';\n    const patientphoneno = addresses && addresses[0] && addresses[0].phones[0].num || '';\n    const clinicaddress = dnis.clinicaddress || '';\n    const clinicphone = dnis.phone || '';\n    const mapaddress = storemapaddress?storemapaddress:patientaddress;\n    const mapphoneno = storemapphoneno?storemapphoneno:patientphoneno;\n    \n    const changeParkingFilter = (checked: boolean) => {\n        if (checked) {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: \"parking\",\n              switch1: false,\n              switch2: false,\n              switch3: false,\n              switch4: true\n            }\n          });\n        } else {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: '',\n              switch1: false,\n              switch2: false,\n              switch3: false,\n              switch4: false\n            }\n          });\n        }\n        setInitmaploop(true);\n      }\n    \n      const changeHospitalFilter = (checked: boolean) => {\n        if (checked) {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: \"hospital\",\n              switch1: false,\n              switch2: false,\n              switch3: true,\n              switch4: false\n            }\n          });\n        } else {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: '',\n              switch1: false,\n              switch2: false,\n              switch3: false,\n              switch4: false\n            }\n          });\n        }\n        setInitmaploop(true);\n      }\n    \n      const changePharmacyFilter = (checked: boolean) => {\n        if (checked) {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: \"pharmacy\",\n              switch1: false,\n              switch2: true,\n              switch3: false,\n              switch4: false\n            }\n          });\n        } else {\n          dispatch({\n            type: \"MAP_FILTER\",\n            payload: {\n              mapfilter: '',\n              switch1: false,\n              switch2: false,\n              switch3: false,\n              switch4: false\n            }\n          });\n        }\n        setInitmaploop(true);\n      }\n\n      const changeGeoLocation = (e: any) => {\n        console.log(\"changeGeoLocation\",e);\n        if((e) && e==='customer'){\n          if(patientaddress){\n            dispatch({\n              type: \"ADD_MAP\",\n              payload: {\n                  mapaddress: patientaddress,\n                  mapphoneno: patientphoneno\n              }\n            });\n          }\n        }else{\n          if(clinicaddress){\n            dispatch({\n              type: \"ADD_MAP\",\n              payload: {\n                  mapaddress: clinicaddress,\n                  mapphoneno: clinicphone\n              }\n            });\n          }\n        }\n        setInitmaploop(true);\n      }\n\n\n    return (\n        <>\n        <div>\n      <div style={{ textAlign: \"left\" }}>\n        <span style={{ marginRight: \"45px\" }} />\n        <Select defaultValue=\"customer\" style={{ width: 200 }} onChange={changeGeoLocation}>\n          <Option value=\"customer\">Customer Geo Location</Option>\n          <Option value=\"clinic\">Clinic Geo Location</Option>\n        </Select>\n        <span style={{ marginRight: \"15px\" }} />\n        <span style={{ marginRight: \"70px\" }} >\n          <Icon type=\"environment\" />\n          <Text strong style={{ fontSize: \"16px\" }}>{mapaddress}</Text></span>\n        <span style={{ marginRight: \"30px\" }} >\n          <Icon type=\"phone\" />\n          <Text strong style={{ fontSize: \"16px\" }}>{mapphoneno}</Text></span>\n        <input type=\"hidden\" value={mapdefaultfilter} id=\"mapfilter\" />\n        <input type=\"hidden\" value={defaultaddress} id=\"defaultaddress\" />\n        <input type=\"hidden\" value={mapaddress} id=\"mapaddress\" />\n        <input type=\"hidden\" value={lat} id=\"lat\" />\n        <input type=\"hidden\" value={lon} id=\"lon\" />\n      </div>\n      <div>\n        <Row >\n          <Col span={20}>\n            <div id=\"map\"></div>\n          </Col>\n          <Col span={4}>\n\n            {/* <Icon type=\"disconnect\"  style={{ fontSize: '40px', color: '#08c' }}/> */}\n            {(props.pharmacyfilter) && <div style={{ marginBottom: '8px' }}>\n              <span style={{ textAlign: 'center', display: 'inline-block', width: '56px' }}>\n                <FontAwesomeIcon icon={faPrescription} size=\"3x\" />\n              </span>\n              <span style={{ textAlign: 'center'}}>\n                <Switch\n                  checkedChildren=\"Yes\"\n                  unCheckedChildren=\"No\"\n                  onChange={changePharmacyFilter}\n                  checked={pharmacyswitch}\n                />\n              </span>\n            </div>}\n            {/* <Icon type=\"tablet\" style={{ fontSize: '40px', color: '#08c' }}/> */}\n            {(props.hospitalfilter) && <div style={{ marginBottom: '8px' }}>\n              <span style={{ textAlign: 'center', display: 'inline-block', width: '56px' }}>\n                <FontAwesomeIcon icon={faClinicMedical} size=\"3x\" />\n              </span>\n              <span style={{ textAlign: 'center'}}>\n                <Switch\n                  checkedChildren=\"Yes\"\n                  unCheckedChildren=\"No\"\n                  className=\"hospital\"\n                  onChange={changeHospitalFilter}\n                  checked={hospitalswitch}\n                />\n              </span>\n            </div>}\n            {/* <Icon type=\"shop\" style={{ fontSize: '40px', color: '#08c' }}/> */}\n            {(props.parkingfilter) && <div style={{ marginBottom: '8px' }}>\n              <span style={{ textAlign: 'center', display: 'inline-block', width: '56px' }}>\n                <FontAwesomeIcon icon={faParking} size=\"3x\" />\n              </span>\n              <span style={{ textAlign: 'center'}}>\n                <Switch\n                  checkedChildren=\"Yes\"\n                  unCheckedChildren=\"No\"\n                  className=\"hotel\"\n                  checked={parkingswitch}\n                  onChange={changeParkingFilter}\n                />\n              </span>\n            </div>}\n            {/* <Row gutter={6} align=\"middle\" justify=\"space-around\">\n              <span> {\" \"}\n                <Icon type=\"deployment-unit\" style={{ fontSize: '40px', color: '#08c' }} />\n                {\"  \"}\n                <Switch\n                  checkedChildren=\"Yes\"\n                  unCheckedChildren=\"No\"\n                  checked={switch1}\n                  style={{ fontSize: '40px', color: '#08c' }}\n                />\n              </span>\n            </Row> */}\n          </Col>\n        </Row>\n      </div>\n      {googleMap(dispatch, initmaploop, setInitmaploop)}\n    </div>\n        </>\n\n    );\n    \n};"]}},"error":null,"hash":"c1c915d69dcef213ea99bd0c61a0967e","cacheData":{"env":{}}}
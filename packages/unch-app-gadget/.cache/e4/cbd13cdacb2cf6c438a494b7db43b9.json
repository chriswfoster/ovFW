{"id":"TinV","dependencies":[{"name":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-log/tsconfig.json","includedInParent":true,"mtime":1569550736048},{"name":"/Users/chriswf/Documents/Projects/unch-gadget/packages/unch-app-gadget/package.json","includedInParent":true,"mtime":1569550537782},{"name":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-log/package.json","includedInParent":true,"mtime":1569550736048},{"name":"uuid","loc":{"line":3,"column":21},"parent":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/one-log/src/log.ts","resolved":"/Users/chriswf/Documents/Projects/unch-gadget/node_modules/uuid/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar uuid_1 = require(\"uuid\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"INFO\"] = 10] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 20] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 30] = \"ERROR\";\n    LogLevel[LogLevel[\"DEBUG\"] = 40] = \"DEBUG\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nexports.LogLevelMap = {\n    'INFO': LogLevel.INFO,\n    'WARN': LogLevel.WARN,\n    'ERROR': LogLevel.ERROR,\n    'DEBUG': LogLevel.DEBUG,\n};\nexports.defaultFormat = function (key, level, title, description, context) {\n    var ts = (new Date()).toISOString();\n    var content = (context) ?\n        \"[\" + ts + \",\" + level + \"][\" + key + \"]\" + title + \", \" + description + \", \" + JSON.stringify(context) :\n        \"[\" + ts + \",\" + level + \"][\" + key + \"]\" + title + \", \" + description;\n    return content;\n};\nvar Log = /** @class */ (function () {\n    function Log(key, loggers, level, format) {\n        if (key === void 0) { key = uuid_1.v4(); }\n        if (loggers === void 0) { loggers = []; }\n        if (level === void 0) { level = LogLevel.ERROR; }\n        if (format === void 0) { format = exports.defaultFormat; }\n        this.key = key;\n        this.loggers = loggers;\n        this.level = level;\n        this.format = format;\n    }\n    Log.prototype.add = function (logger) {\n        this.loggers.push(logger);\n    };\n    Log.prototype.log = function (key, level, title, description, context) {\n        var _a = this, format = _a.format, loggers = _a.loggers;\n        var content = format(key, level, title, description, context);\n        for (var _i = 0, loggers_1 = loggers; _i < loggers_1.length; _i++) {\n            var logger = loggers_1[_i];\n            logger.log(content);\n        }\n    };\n    Log.prototype.debug = function (title, description, context) {\n        var _a = this, key = _a.key, level = _a.level;\n        if (level >= LogLevel.DEBUG) {\n            this.log(key, 'DEBUG', title, description, context);\n        }\n    };\n    Log.prototype.error = function (title, description, context) {\n        var _a = this, key = _a.key, level = _a.level;\n        if (level >= LogLevel.ERROR) {\n            this.log(key, 'ERROR', title, description, context);\n        }\n    };\n    Log.prototype.warn = function (title, description, context) {\n        var _a = this, key = _a.key, level = _a.level;\n        if (level >= LogLevel.WARN) {\n            this.log(key, 'WARN', title, description, context);\n        }\n    };\n    Log.prototype.info = function (title, description, context) {\n        var _a = this, key = _a.key, level = _a.level;\n        if (level >= LogLevel.INFO) {\n            this.log(key, 'INFO', title, description, context);\n        }\n    };\n    return Log;\n}());\nexports.Log = Log;\n"},"sourceMaps":{"js":{"version":3,"file":"log.js","sourceRoot":"","sources":["../../../node_modules/one-log/src/log.ts"],"names":[],"mappings":"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","sourcesContent":["import { v4 as uuid } from 'uuid';\nimport { Logger } from \"one-logger\";\nimport { number } from 'prop-types';\n\nexport const enum LogLevel {\n    INFO = 10,\n    WARN = 20,\n    ERROR = 30,\n    DEBUG = 40,\n}\n\nexport const LogLevelMap: {\n    [indexer: string]: LogLevel,\n} = {\n    'INFO': LogLevel.INFO,\n    'WARN': LogLevel.WARN,\n    'ERROR': LogLevel.ERROR,\n    'DEBUG': LogLevel.DEBUG,\n};\n\nexport type Format = (\n    key: string, level: string, title: string, description: string, context?: any,\n) => string;\n\nexport const defaultFormat: Format = (\n    key: string, level: string, title: string, description: string, context?: any,\n) => {\n    const ts = (new Date()).toISOString();\n    const content = (context) ?\n        `[${ts},${level}][${key}]${title}, ${description}, ${JSON.stringify(context)}` :\n        `[${ts},${level}][${key}]${title}, ${description}`;\n    return content;\n};\n\nexport class Log {\n    private key: string;\n    private format: Format;\n    private level: LogLevel;\n    private loggers: Logger[];\n\n    constructor(\n        key: string = uuid(),\n        loggers: Logger[] = [],\n        level: LogLevel = LogLevel.ERROR,\n        format: Format = defaultFormat,\n    ) {\n        this.key = key;\n        this.loggers = loggers;\n        this.level = level;\n        this.format = format;\n    }\n\n    add(logger: Logger) {\n        this.loggers.push(logger);\n    }\n\n    log(\n        key: string,\n        level: string,\n        title: string,\n        description: string,\n        context?: any,\n    ) {\n        const { format, loggers } = this;\n        const content = format(\n            key, level, title, description, context,\n        );\n\n        for (const logger of loggers) {\n            logger.log(content);\n        }\n    }\n\n    debug(title: string, description: string, context?: any): void {\n        const { key, level } = this;\n        if (level >= LogLevel.DEBUG) {\n            this.log(\n                key, 'DEBUG', title, description, context,\n            );\n        }\n    }\n\n    error(title: string, description: string, context?: any): void {\n        const { key, level } = this;\n        if (level >= LogLevel.ERROR) {\n            this.log(\n                key, 'ERROR', title, description, context,\n            );\n        }\n    }\n\n    warn(title: string, description: string, context?: any): void {\n        const { key, level } = this;\n        if (level >= LogLevel.WARN) {\n            this.log(\n                key, 'WARN', title, description, context,\n            );\n        }\n    }\n\n    info(title: string, description: string, context?: any): void {\n        const { key, level } = this;\n        if (level >= LogLevel.INFO) {\n            this.log(\n                key, 'INFO', title, description, context,\n            );\n        }\n    }\n}\n"]}},"error":null,"hash":"9941d62c40691efc4fb3cc2a79b23644","cacheData":{"env":{}}}